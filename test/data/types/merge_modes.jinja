// WARNING: This file was auto-generated by: {{ script }}
default xkb_types "base" {

{%- macro make_base() -%}
	virtual_modifiers NumLock, LevelThree;
	virtual_modifiers Mapped1=Mod1, Mapped2=Mod2, Mapped3=Mod3, Mapped4=Mod4;
	virtual_modifiers Unmapped1;

	type "ONE_LEVEL" {
		modifiers = None;
		map[None] = Level1;
		level_name[Level1]= "Any";
	};

	type "TWO_LEVEL" {
		modifiers = Shift;
		map[Shift] = Level2;
		level_name[Level1] = "Base";
		level_name[Level2] = "Shift";
	};

	type "ALPHABETIC" {
		modifiers = Shift+Lock;
		map[Shift] = Level2;
		map[Lock] = Level2;
		level_name[Level1] = "Base";
		level_name[Level2] = "Caps";
	};

	type "KEYPAD" {
		modifiers = Shift+NumLock;
		map[None] = Level1;
		map[Shift] = Level2;
		map[NumLock] = Level2;
		map[Shift+NumLock] = Level1;
		level_name[Level1] = "Base";
		level_name[Level2] = "Number";
	};

	type "FOUR_LEVEL" {
		modifiers = Shift+LevelThree;
		map[None] = Level1;
		map[Shift] = Level2;
		map[LevelThree] = Level3;
		map[Shift+LevelThree] = Level4;
		level_name[Level1] = "Base";
		level_name[Level2] = "Shift";
		level_name[Level3] = "Alt Base";
		level_name[Level4] = "Shift Alt";
	};

	type "FOUR_LEVEL_ALPHABETIC" {
		modifiers = Shift+Lock+LevelThree;
		map[None] = Level1;
		map[Shift] = Level2;
		map[Lock]  = Level2;
		map[LevelThree] = Level3;
		map[Shift+LevelThree] = Level4;
		map[Lock+LevelThree] =  Level4;
		map[Lock+Shift+LevelThree] =  Level3;
		level_name[Level1] = "Base";
		level_name[Level2] = "Shift";
		level_name[Level3] = "Alt Base";
		level_name[Level4] = "Shift Alt";
	};

	type "FOUR_LEVEL_SEMIALPHABETIC" {
		modifiers = Shift+Lock+LevelThree;
		map[None] = Level1;
		map[Shift] = Level2;
		map[Lock]  = Level2;
		map[LevelThree] = Level3;
		map[Shift+LevelThree] = Level4;
		map[Lock+LevelThree] =  Level3;
		map[Lock+Shift+LevelThree] = Level4;
		preserve[Lock+LevelThree] = Lock;
		preserve[Lock+Shift+LevelThree] = Lock;
		level_name[Level1] = "Base";
		level_name[Level2] = "Shift";
		level_name[Level3] = "Alt Base";
		level_name[Level4] = "Shift Alt";
	};
{% endmacro %}

{{ make_base() }}
};

{% macro make_update(name, mode, local) -%}
xkb_types "{{ name }}{{ "-" + mode if local else "" }}" {
{% set mode = mode + " " if local and mode != "default" else "" %}
	{% if local %}
	include "{{ filename }}(base)"

	{% endif %}
	{{ mode }}virtual_modifiers NumLock, LevelThree; // Unchanged: unmapped
	{{ mode }}virtual_modifiers Mapped1 = Mod2;      // Changed: altered mapping
	{{ mode }}virtual_modifiers Mapped2;             // Changed: unmapped
	{{ mode }}virtual_modifiers Mapped3 = none;      // Changed: reset
	{{ mode }}virtual_modifiers Mapped4 = Mod4;      // Unchanged: mapped
	{{ mode }}virtual_modifiers Unmapped1 = 0x84;    // Changed: now mapped
	{{ mode }}virtual_modifiers Unmapped2;           // Changed: new, unmapped
	{{ mode }}virtual_modifiers Mapped5 = Mod5;      // Changed: new, mapped

	{{ mode }}type "ONE_LEVEL" {
		modifiers = None;
		map[None] = Level1;
		level_name[Level1]= "New"; // Change name
	};

	{{ mode }}type "TWO_LEVEL" {
		modifiers = Shift+Mapped1; // Changed
		map[Shift] = Level2;
		map[Mapped1] = Level2; // Changed
		level_name[Level1] = "Base";
		level_name[Level2] = "Shift";
	};

	{{ mode }}type "ALPHABETIC" {
		modifiers = Lock; // Changed
		map[None] = Level2; // Changed
		map[Lock] = Level1; // Changed
		level_name[Level1] = "Base";
		level_name[Level2] = "Caps";
	};

	{{ mode }}type "KEYPAD" {
		modifiers = Shift+NumLock;
		map[None] = Level1;
		// map[Shift] = Level2; // Changed
		map[NumLock] = Level3; // Changed
		map[Shift+NumLock] = Level1;
		level_name[Level1] = "Base";
		level_name[Level2] = "Number";
		level_name[Level3] = "Number bis"; // Changed
	};

	// Unchanged
	{{ mode }}type "FOUR_LEVEL" {
		modifiers = Shift+LevelThree;
		map[None] = Level1;
		map[Shift] = Level2;
		map[LevelThree] = Level3;
		map[Shift+LevelThree] = Level4;
		level_name[Level1] = "Base";
		level_name[Level2] = "Shift";
		level_name[Level3] = "Alt Base";
		level_name[Level4] = "Shift Alt";
	};

	{{ mode }}type "FOUR_LEVEL_ALPHABETIC" {
		modifiers = Shift+Lock+LevelThree;
		map[None] = Level1;
		map[Shift] = Level2;
		map[Lock]  = Level2;
		map[LevelThree] = Level3;
		map[Shift+LevelThree] = Level4;
		map[Lock+LevelThree] =  Level4;
		map[Lock+Shift+LevelThree] =  Level3;
		level_name[Level1] = "Base";
		level_name[Level2] = "Shift";
		level_name[Level3] = "Alt Base";
		level_name[Level4] = "Shift Alt";
	};

	{{ mode }}type "FOUR_LEVEL_SEMIALPHABETIC" {
		modifiers = Shift+Lock+LevelThree;
		map[None] = Level1;
		map[Shift] = Level2;
		map[Lock]  = Level2;
		map[LevelThree] = Level3;
		map[Shift+LevelThree] = Level4;
		map[Lock+LevelThree] =  Level3;
		map[Lock+Shift+LevelThree] = Level4;
		preserve[Lock+LevelThree] = Lock;
		preserve[Lock+Shift+LevelThree] = Lock;
		level_name[Level1] = "Base";
		level_name[Level2] = "Shift";
		level_name[Level3] = "Alt Base";
		level_name[Level4] = "Shift Alt";
	};

	// New
	{{ mode }}type "XXX" {
		modifiers = None;
		map[None] = Level1;
		level_name[Level1]= "New";
	};

};
{% endmacro %}

{{ make_update("new", "update", false) }}
{{ make_update("new", "default", true) }}
{{ make_update("new", "augment", true) }}
{{ make_update("new", "override", true) }}
{{ make_update("new", "replace", true) }}

xkb_types "default" {
{% macro make_override() %}
	virtual_modifiers NumLock,LevelThree;
	virtual_modifiers Mapped1=Mod2,Mapped2=Mod2,Mapped3,Mapped4=Mod4;
	virtual_modifiers Unmapped1=Control+Mod5,Unmapped2;
	virtual_modifiers Mapped5=Mod5;

	type "ONE_LEVEL" {
		modifiers= none;
		level_name[1]= "New";
	};
	type "TWO_LEVEL" {
		modifiers= Shift+Mapped1;
		map[Shift]= 2;
		map[Mapped1]= 2;
		level_name[1]= "Base";
		level_name[2]= "Shift";
	};
	type "ALPHABETIC" {
		modifiers= Lock;
		map[none]= 2;
		level_name[1]= "Base";
		level_name[2]= "Caps";
	};
	type "KEYPAD" {
		modifiers= Shift+NumLock;
		map[NumLock]= 3;
		level_name[1]= "Base";
		level_name[2]= "Number";
		level_name[3]= "Number bis";
	};
	type "FOUR_LEVEL" {
		modifiers= Shift+LevelThree;
		map[Shift]= 2;
		map[LevelThree]= 3;
		map[Shift+LevelThree]= 4;
		level_name[1]= "Base";
		level_name[2]= "Shift";
		level_name[3]= "Alt Base";
		level_name[4]= "Shift Alt";
	};
	type "FOUR_LEVEL_ALPHABETIC" {
		modifiers= Shift+Lock+LevelThree;
		map[Shift]= 2;
		map[Lock]= 2;
		map[LevelThree]= 3;
		map[Shift+LevelThree]= 4;
		map[Lock+LevelThree]= 4;
		map[Shift+Lock+LevelThree]= 3;
		level_name[1]= "Base";
		level_name[2]= "Shift";
		level_name[3]= "Alt Base";
		level_name[4]= "Shift Alt";
	};
	type "FOUR_LEVEL_SEMIALPHABETIC" {
		modifiers= Shift+Lock+LevelThree;
		map[Shift]= 2;
		map[Lock]= 2;
		map[LevelThree]= 3;
		map[Shift+LevelThree]= 4;
		map[Lock+LevelThree]= 3;
		preserve[Lock+LevelThree]= Lock;
		map[Shift+Lock+LevelThree]= 4;
		preserve[Shift+Lock+LevelThree]= Lock;
		level_name[1]= "Base";
		level_name[2]= "Shift";
		level_name[3]= "Alt Base";
		level_name[4]= "Shift Alt";
	};
	type "XXX" {
		modifiers = None;
		map[None] = Level1;
		level_name[Level1]= "New";
	};
{%- endmacro %}
{{ make_override() }}
};

xkb_types "augment" {
	virtual_modifiers NumLock,LevelThree;
	virtual_modifiers Mapped1=Mod1,Mapped2=Mod2,Mapped3=Mod3,Mapped4=Mod4;
	virtual_modifiers Unmapped1=Control+Mod5,Unmapped2;
	virtual_modifiers Mapped5=Mod5;

	type "ONE_LEVEL" {
		modifiers= none;
		level_name[1]= "Any";
	};
	type "TWO_LEVEL" {
		modifiers= Shift;
		map[Shift]= 2;
		level_name[1]= "Base";
		level_name[2]= "Shift";
	};
	type "ALPHABETIC" {
		modifiers= Shift+Lock;
		map[Shift]= 2;
		map[Lock]= 2;
		level_name[1]= "Base";
		level_name[2]= "Caps";
	};
	type "KEYPAD" {
		modifiers= Shift+NumLock;
		map[Shift]= 2;
		map[NumLock]= 2;
		level_name[1]= "Base";
		level_name[2]= "Number";
	};
	type "FOUR_LEVEL" {
		modifiers= Shift+LevelThree;
		map[Shift]= 2;
		map[LevelThree]= 3;
		map[Shift+LevelThree]= 4;
		level_name[1]= "Base";
		level_name[2]= "Shift";
		level_name[3]= "Alt Base";
		level_name[4]= "Shift Alt";
	};
	type "FOUR_LEVEL_ALPHABETIC" {
		modifiers= Shift+Lock+LevelThree;
		map[Shift]= 2;
		map[Lock]= 2;
		map[LevelThree]= 3;
		map[Shift+LevelThree]= 4;
		map[Lock+LevelThree]= 4;
		map[Shift+Lock+LevelThree]= 3;
		level_name[1]= "Base";
		level_name[2]= "Shift";
		level_name[3]= "Alt Base";
		level_name[4]= "Shift Alt";
	};
	type "FOUR_LEVEL_SEMIALPHABETIC" {
		modifiers= Shift+Lock+LevelThree;
		map[Shift]= 2;
		map[Lock]= 2;
		map[LevelThree]= 3;
		map[Shift+LevelThree]= 4;
		map[Lock+LevelThree]= 3;
		preserve[Lock+LevelThree]= Lock;
		map[Shift+Lock+LevelThree]= 4;
		preserve[Shift+Lock+LevelThree]= Lock;
		level_name[1]= "Base";
		level_name[2]= "Shift";
		level_name[3]= "Alt Base";
		level_name[4]= "Shift Alt";
	};
	type "XXX" {
		modifiers = None;
		map[None] = Level1;
		level_name[Level1]= "New";
	};
};

xkb_types "override" {
{{ make_override() }}
};

xkb_types "replace" {
{{ make_override() }}
};
