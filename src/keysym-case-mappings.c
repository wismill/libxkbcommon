// NOTE: This file has been generated automatically by “update-unicode.py”.
//       Do not edit manually!

/*
 * Copyright © 2024 Pierre Le Marre
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice (including the next
 * paragraph) shall be included in all copies or substantial portions of the
 * Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 * DEALINGS IN THE SOFTWARE.
 */

/* Case mappings for Unicode 15.1
 *
 * There are two kinds of keysyms to consider:
 * • Legacy keysyms: their case mappings is located at `data/keysyms.yaml`.
 * • Unicode keysyms: their case mappings come from the ICU library.
 *
 * These mappings would create huge lookup tables if done naively. Fortunately,
 * we can observe that if we compute only the *difference* between a keysym and
 * its corresponding case mapping, there are a lot of repetitions that can be
 * efficiently compressed.
 *
 * The idea for the compression is, for each kind of keysyms:
 * 1. Compute the deltas between the keysyms and their case mappings.
 * 2. Split the delta array in chunks of a given size.
 * 3. Rearrange the order of the chunks in order to optimize consecutive
 *    chunks overlap.
 * 4. Create a data table with the reordered chunks and an index table that
 *    maps the original chunk index to its offset in the data table.
 *
 * Trivial example (chunk size: 4, from step 2):
 *
 * [1, 2, 3, 4, 2, 3, 4, 5, 0, 1, 2, 3]          # source data
 * -> [[1, 2, 3, 4], [2, 3, 4, 5], [0, 1, 2, 3]] # make chunks
 * -> [[0, 1, 2, 3], [1, 2, 3, 4], [2, 3, 4, 5]] # rearrange to have best overlaps
 * -> {data: [0, 1, 2, 3, 4, 5], offsets: [1, 2, 0]} # overlap chunks & compute
 *                                                   # their offsets
 *
 * Then we can retrieve the data from the original array at index i with the
 * following formula:
 *
 *     mask = (1 << chunk_size) - 1;
 *     original[i] = data[offsets[i >> chunk_size] + (i & mask)];
 *
 * Since the index array is itself quite repetitive with the real data, we apply
 * the compression a second time to the offsets table.
 *
 * The complete algorithm optimizes the chunk sizes for both arrays in order to
 * get the lowest total data size.
 *
 * There are 6 resulting arrays, 3 for each kind of keysyms:
 * 1. The data array. Each item is either:
 *    • 0, if the keysym is not cased.
 *    • A delta to lower case.
 *    • A delta to upper case.
 *    • For some special cases, there are both a lower *and* an upper case
 *      mapping. The delta is identical in both cases.
 * 2. The 1st offsets array, that provides offsets into the data array.
 * 3. The 2nd offsets array, that provides offsets into the 1st index array.
 *
 * Finally, given the chunks sizes `cs_data` and `cs_offsets`:
 * 1. We compute the corresponding masks:
 *    • `mask_data = (1 << cs_data) - 1` and
 *    • `mask_offsets = (1 << cs_offsets) - 1`.
 * 2. We can retrieve the case mapping of a keysyms `ks` with the following
 *    formula:
 *
 *     data[
 *         offsets1[
 *             offsets2[ks >> (cs_data + cs_offsets)] +
 *             ((ks >> cs_data) & mask_offsets)
 *         ] +
 *         (ks & mask_data)
 *     ];
 */

#include "config.h"

#include <stdint.h>
#include <stdbool.h>
#include <string.h>
#include "xkbcommon/xkbcommon.h"
#include "utils.h"
#include "keysym.h"

struct CaseMappings{
    bool lower:1;
    bool upper:1;
    int32_t offset:30;
};

static const struct CaseMappings legacy_keysym_data[46] = {
    {1, 0, 0x000020}, {0, 1, 0x000000}, {1, 0, 0x000010}, {0, 0, 0x000000},
    {0, 0, 0x000000}, {1, 0, 0x000020}, {1, 0, 0x000020}, {0, 0, 0x000000},
    {0, 1,-0x000717}, {0, 1, 0x000020}, {0, 0, 0x000000}, {0, 1, 0x000020},
    {0, 1, 0x000020}, {0, 1,-0x0012bf}, {0, 1, 0x000000}, {0, 0, 0x000000},
    {1, 0, 0x000010}, {1, 0, 0x000010}, {0, 1,-0xfff89b}, {0, 0, 0x000000},
    {0, 1, 0x000010}, {0, 0, 0x000000}, {0, 1,-0x000010}, {0, 1,-0x000010},
    {0, 1, 0x000000}, {0, 1, 0x000010}, {0, 1, 0x000010}, {1, 0, 0x000002},
    {0, 0, 0x000000}, {1, 0,-0x000010}, {1, 0,-0x000010}, {1, 0,-0x0012bf},
    {1, 0,-0x000020}, {1, 0,-0x000020}, {0, 1,-0x000020}, {0, 1,-0x000020},
    {0, 0, 0x000000}, {1, 0,-0x000240}, {0, 0, 0x000000}, {0, 1, 0x000002},
    {0, 0, 0x000000}, {0, 1, 0x000270}, {0, 1, 0x000020}, {0, 1, 0x000021},
    {1, 0, 0x000001}, {0, 1, 0x000001}
};

static const uint8_t legacy_keysym_offsets1[540] = {
    0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003,
    0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x000f, 0x0010, 0x0010, 0x000f,
    0x0010, 0x000f, 0x0003, 0x0003, 0x0013, 0x0019, 0x0019, 0x0018, 0x0019, 0x0018,
    0x0003, 0x0003, 0x0004, 0x0005, 0x0005, 0x0005, 0x0005, 0x0005, 0x0005, 0x0005,
    0x0005, 0x0006, 0x0005, 0x0005, 0x0005, 0x0003, 0x0003, 0x0003, 0x000a, 0x000b,
    0x000b, 0x000b, 0x000b, 0x000b, 0x000b, 0x000b, 0x000b, 0x002a, 0x000b, 0x000b,
    0x000b, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003,
    0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003,
    0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003,
    0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003,
    0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003,
    0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003,
    0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0012, 0x0003, 0x0003, 0x0003, 0x0003,
    0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003,
    0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003,
    0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0004, 0x0005,
    0x0005, 0x0005, 0x0005, 0x0005, 0x0005, 0x0005, 0x0005, 0x0005, 0x0005, 0x0005,
    0x0005, 0x0006, 0x0003, 0x0003, 0x000a, 0x000b, 0x000b, 0x000b, 0x000b, 0x000b,
    0x000b, 0x000b, 0x000b, 0x000b, 0x000b, 0x000b, 0x000b, 0x0009, 0x0003, 0x0003,
    0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003,
    0x0003, 0x0003, 0x0003, 0x0003, 0x000f, 0x000f, 0x000f, 0x0002, 0x000f, 0x0010,
    0x0002, 0x0010, 0x0013, 0x0013, 0x0013, 0x0014, 0x0013, 0x0019, 0x0014, 0x0019,
    0x0006, 0x0004, 0x0004, 0x0006, 0x0006, 0x0006, 0x0006, 0x0004, 0x0005, 0x0006,
    0x0004, 0x0003, 0x0005, 0x0004, 0x0003, 0x0006, 0x0009, 0x000a, 0x000a, 0x0009,
    0x0009, 0x0009, 0x0009, 0x000a, 0x000b, 0x0009, 0x000a, 0x0003, 0x000b, 0x000a,
    0x0003, 0x0009, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003,
    0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0001,
    0x000f, 0x0002, 0x0003, 0x0010, 0x0002, 0x0003, 0x0003, 0x0013, 0x0013, 0x0014,
    0x0003, 0x0019, 0x001a, 0x0026, 0x0006, 0x0003, 0x0003, 0x0004, 0x0003, 0x0003,
    0x0006, 0x0004, 0x0004, 0x0005, 0x0003, 0x0003, 0x0004, 0x0003, 0x0004, 0x0006,
    0x0009, 0x0003, 0x0003, 0x000a, 0x0003, 0x0003, 0x0009, 0x000a, 0x000a, 0x000b,
    0x0003, 0x0003, 0x000a, 0x0003, 0x000a, 0x0009, 0x0003, 0x0003, 0x0003, 0x0003,
    0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003,
    0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003,
    0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x002c, 0x001f, 0x0003, 0x0003,
    0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003,
    0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x000e,
    0x0003, 0x0003, 0x0003, 0x0003, 0x0007, 0x0003, 0x0003, 0x000e, 0x0003, 0x0003,
    0x0005, 0x0005, 0x0005, 0x0005, 0x0005, 0x0005, 0x0005, 0x0005, 0x0005, 0x0005,
    0x0005, 0x0006, 0x0005, 0x0005, 0x0005, 0x0000, 0x000b, 0x000b, 0x000b, 0x000b,
    0x000b, 0x000b, 0x000b, 0x000b, 0x000b, 0x000b, 0x000b, 0x0009, 0x000b, 0x000b,
    0x000b, 0x000c, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003,
    0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x000f, 0x0003,
    0x0003, 0x0002, 0x0024, 0x000f, 0x0002, 0x0003, 0x0013, 0x0003, 0x0003, 0x0014,
    0x0028, 0x0013, 0x0014, 0x0003, 0x0003, 0x0003, 0x0004, 0x0006, 0x0003, 0x0003,
    0x0003, 0x0003, 0x0003, 0x0003, 0x0004, 0x0003, 0x0006, 0x0003, 0x0004, 0x0006,
    0x0003, 0x0003, 0x000a, 0x0009, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003,
    0x000a, 0x0003, 0x0009, 0x0003, 0x000a, 0x0009, 0x0003, 0x0003, 0x0003, 0x0003,
    0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003, 0x0003,
    0x0003, 0x0003, 0x0015, 0x0016, 0x0016, 0x0016, 0x0016, 0x0016, 0x0016, 0x0016,
    0x001c, 0x001d, 0x001d, 0x001d, 0x001d, 0x001d, 0x001d, 0x001d, 0x0022, 0x0022,
    0x0022, 0x0022, 0x0022, 0x0022, 0x0022, 0x0022, 0x0022, 0x0022, 0x0022, 0x0022,
    0x0022, 0x0022, 0x0022, 0x0022, 0x0020, 0x0020, 0x0020, 0x0020, 0x0020, 0x0020,
    0x0020, 0x0020, 0x0020, 0x0020, 0x0020, 0x0020, 0x0020, 0x0020, 0x0020, 0x0020
};

static const uint16_t legacy_keysym_offsets2[40] = {
    0x007e, 0x015c, 0x003d, 0x00bc, 0x003d, 0x019c, 0x003d, 0x00fc, 0x003d, 0x003d,
    0x003d, 0x003d, 0x003d, 0x01dc, 0x003d, 0x0000, 0x003d, 0x0042, 0x003d, 0x003d,
    0x003d, 0x003d, 0x003d, 0x003d, 0x003d, 0x003d, 0x003d, 0x003d, 0x003d, 0x003d,
    0x003d, 0x003d, 0x003d, 0x003d, 0x003d, 0x003d, 0x003d, 0x003d, 0x003d, 0x013c
};

static inline const struct CaseMappings *
get_legacy_keysym_entry(xkb_keysym_t ks)
{
    return &legacy_keysym_data[legacy_keysym_offsets1[legacy_keysym_offsets2[ks >> 7] + ((ks >> 1) & 0x3f)] + (ks & 0x01)];
}

static const struct CaseMappings unicode_data[555] = {
    {0, 1, 0x0047}, {0, 1, 0x0000}, {0, 1, 0x0000}, {0, 1, 0x0000},
    {0, 0, 0x0000}, {0, 0, 0x0000}, {0, 0, 0x0000}, {0, 0, 0x0000},
    {1, 0, 0x0000}, {1, 0, 0x0000}, {1, 0, 0x0000}, {0, 1, 0x0000},
    {0, 1, 0x0000}, {1, 0, 0x0000}, {1, 0, 0x0000}, {1, 0, 0x001c},
    {1, 0, 0x0000}, {0, 1, 0x002f}, {0, 1, 0x0036}, {0, 1, 0x0008},
    {0, 1, 0x0008}, {0, 1, 0x0008}, {0, 1, 0x0008}, {0, 0, 0x0000},
    {0, 0, 0x0000}, {1, 0,-0x0009}, {0, 0, 0x0000}, {0, 1, 0x1c25},
    {0, 0, 0x0000}, {1, 0, 0x0000}, {0, 1, 0x0000}, {0, 1, 0x0000},
    {0, 1,-0xa528}, {0, 1,-0xa544}, {0, 1, 0x0000}, {0, 1,-0xa515},
    {0, 1,-0xa512}, {0, 1, 0x0000}, {1, 0, 0x0020}, {1, 0, 0x0020},
    {1, 0, 0x0020}, {0, 0, 0x0000}, {1, 0, 0x0020}, {1, 0, 0x0020},
    {1, 0, 0x0020}, {1, 0, 0x0020}, {0, 1, 0x0000}, {0, 1,-0x0008},
    {0, 1, 0x0000}, {0, 1,-0x0008}, {0, 1,-0x0008}, {0, 1, 0x0000},
    {0, 1,-0x0009}, {1, 0, 0x0025}, {1, 0, 0x0025}, {1, 0, 0x0025},
    {0, 0, 0x0000}, {0, 1, 0x0020}, {0, 1, 0x0020}, {0, 1, 0x0020},
    {0, 1, 0x0020}, {0, 1,-0x0079}, {1, 0,-0xa54b}, {1, 0,-0xa541},
    {1, 0,-0xa544}, {0, 1, 0x0000}, {0, 1,-0x0007}, {0, 1, 0x0000},
    {0, 1, 0x0000}, {0, 1,-0x29fd}, {0, 1, 0x00d5}, {0, 1, 0x0000},
    {0, 1, 0x0020}, {0, 1, 0x0020}, {0, 1, 0x0020}, {0, 0, 0x0000},
    {1, 0,-0x0008}, {0, 0, 0x0000}, {1, 0,-0x0008}, {1, 0,-0x0008},
    {1, 0,-0x004a}, {1, 0,-0x004a}, {0, 1,-0x0030}, {0, 1, 0x0000},
    {1, 0, 0x0001}, {0, 1, 0x0001}, {0, 1, 0x0000}, {1, 0, 0x0001},
    {0, 1, 0x0001}, {1, 0, 0x0001}, {0, 1, 0x0001}, {0, 1, 0x012c},
    {1, 0,-0x2a1e}, {0, 1, 0x0000}, {1, 0, 0x0001}, {0, 1, 0x0001},
    {0, 1, 0x0000}, {0, 0, 0x0000}, {0, 1,-0xa54f}, {0, 1, 0x0000},
    {0, 1, 0x0000}, {0, 1, 0x0000}, {0, 1, 0x0000}, {0, 1, 0x03a0},
    {1, 0,-0x0007}, {0, 0, 0x0000}, {0, 0, 0x0000}, {0, 0, 0x0000},
    {1, 0, 0x0030}, {1, 0, 0x0030}, {1, 0, 0x0030}, {1, 0, 0x0030},
    {0, 0, 0x0000}, {0, 1,-0x89c2}, {0, 0, 0x0000}, {0, 0, 0x0000},
    {0, 0, 0x0000}, {1, 0,-0x0bc0}, {1, 0,-0x0bc0}, {1, 0,-0x0bc0},
    {1, 0,-0x0bc0}, {0, 0, 0x0000}, {0, 1, 0x1c60}, {0, 1, 0x1c60},
    {0, 1, 0x1c60}, {0, 1, 0x1c60}, {0, 0, 0x0000}, {0, 1, 0x1c60},
    {0, 0, 0x0000}, {0, 0, 0x0000}, {1, 0, 0x0000}, {0, 0, 0x0000},
    {0, 0, 0x0000}, {1, 0, 0x001a}, {1, 0, 0x001a}, {1, 0, 0x001a},
    {1, 0, 0x001a}, {0, 1, 0x003e}, {0, 1, 0x0039}, {1, 0, 0x0000},
    {1, 0, 0x0000}, {1, 0, 0x0000}, {1, 0, 0x0000}, {0, 0, 0x0000},
    {1, 0, 0x0000}, {1, 0, 0x0000}, {0, 0, 0x0000}, {0, 0, 0x0000},
    {0, 1, 0x0000}, {0, 1,-0x0009}, {1, 0, 0x0000}, {1, 0, 0x0000},
    {0, 0, 0x0000}, {0, 1, 0x0000}, {0, 1, 0x0000}, {1, 0,-0x2a3f},
    {1, 0,-0x2a3f}, {1, 0, 0x000f}, {1, 0, 0x0001}, {0, 1, 0x0001},
    {1, 0, 0x0001}, {0, 1, 0x0001}, {0, 0, 0x0000}, {0, 1, 0x0000},
    {1, 0, 0x0001}, {0, 1, 0x0001}, {0, 1, 0x0000}, {0, 1,-0x0038},
    {1, 0, 0x0027}, {1, 0, 0x0027}, {1, 0, 0x0027}, {1, 0, 0x0027},
    {0, 0, 0x0000}, {0, 1, 0x0027}, {0, 0, 0x0000}, {0, 0, 0x0000},
    {0, 0, 0x0000}, {0, 1, 0x0000}, {0, 0, 0x0000}, {0, 0, 0x0000},
    {0, 1, 0x0000}, {0, 1, 0x0000}, {0, 1, 0x0000}, {0, 1, 0x003b},
    {1, 0, 0x0040}, {1, 0, 0x0040}, {1, 0, 0x0040}, {1, 0, 0x0040},
    {0, 0, 0x0000}, {1, 0, 0x003f}, {1, 0, 0x003f}, {0, 1, 0x0040},
    {0, 1, 0x0040}, {0, 1, 0x0040}, {0, 1, 0x0040}, {0, 0, 0x0000},
    {0, 1,-0x007e}, {0, 1,-0x007e}, {0, 0, 0x0000}, {0, 0, 0x0000},
    {0, 1,-0x02e7}, {0, 0, 0x0000}, {0, 0, 0x0000}, {0, 1, 0x0000},
    {0, 1,-0x0082}, {0, 1,-0x0082}, {0, 0, 0x0000}, {1, 0, 0x0074},
    {1, 0,-0x00c7}, {0, 1, 0x00e8}, {1, 0, 0x0001}, {0, 1, 0x0001},
    {0, 1,-0x00a3}, {0, 1, 0x0000}, {1, 0, 0x0002}, {1, 1, 0x0001},
    {0, 1, 0x0002}, {1, 0, 0x0002}, {1, 1, 0x0001}, {1, 0,-0x0079},
    {1, 0, 0x0001}, {0, 1, 0x0001}, {1, 0, 0x0001}, {0, 1, 0x0001},
    {1, 0, 0x0001}, {0, 1, 0x0001}, {1, 0, 0x00db}, {0, 1,-0x00c3},
    {1, 0, 0x00d2}, {1, 0, 0x0001}, {0, 1, 0x0001}, {1, 0, 0x00da},
    {1, 0, 0x0001}, {1, 0, 0x00cb}, {1, 0, 0x0001}, {0, 1, 0x0001},
    {1, 0, 0x00cd}, {1, 0, 0x00cd}, {1, 0, 0x0001}, {0, 1, 0x0001},
    {1, 0,-0x8a04}, {1, 0, 0x0001}, {0, 1, 0x0001}, {1, 0, 0x00da},
    {0, 1, 0x0000}, {0, 1, 0x0000}, {0, 1, 0x0000}, {0, 1,-0xa52a},
    {0, 1, 0x0002}, {1, 0, 0x0001}, {0, 1, 0x0001}, {1, 0, 0x0001},
    {0, 1, 0x0001}, {0, 1, 0x000f}, {0, 1, 0x0001}, {0, 1, 0x004f},
    {1, 0, 0x0001}, {0, 1, 0x0001}, {1, 0,-0x0061}, {1, 0,-0x0038},
    {1, 0, 0x0045}, {1, 0, 0x0047}, {1, 0, 0x0001}, {0, 1, 0x0001},
    {0, 1, 0x0000}, {0, 1, 0x0000}, {0, 1, 0x00db}, {0, 1, 0x0000},
    {1, 0,-0x0082}, {1, 0,-0x0082}, {1, 0,-0x0082}, {0, 1, 0x0000},
    {1, 0, 0x0001}, {0, 1, 0x0001}, {0, 0, 0x0000}, {0, 0, 0x0000},
    {0, 0, 0x0000}, {1, 0, 0x0001}, {0, 1, 0x0001}, {1, 0, 0x00ce},
    {1, 0, 0x0001}, {0, 1, 0x0000}, {0, 1, 0x00d6}, {0, 1, 0x0000},
    {0, 1, 0x0000}, {0, 1,-0x8a38}, {0, 1, 0x0000}, {0, 1, 0x0030},
    {0, 1, 0x0030}, {0, 1, 0x0030}, {0, 1, 0x0030}, {0, 1, 0x0000},
    {0, 1, 0x00ca}, {0, 1, 0x0000}, {0, 1, 0x00cb}, {0, 1, 0x0001},
    {1, 0,-0xa528}, {0, 1, 0x0000}, {0, 0, 0x0000}, {0, 1,-0x0054},
    {0, 0, 0x0000}, {0, 0, 0x0000}, {1, 0, 0x0026}, {0, 0, 0x0000},
    {0, 1, 0x0001}, {1, 0,-0x0007}, {1, 0, 0x0001}, {0, 1, 0x0001},
    {1, 0,-0x29f7}, {1, 0,-0x0ee6}, {1, 0, 0x1c60}, {1, 0, 0x1c60},
    {1, 0, 0x1c60}, {1, 0, 0x1c60}, {0, 0, 0x0000}, {1, 0, 0x1c60},
    {0, 0, 0x0000}, {0, 0, 0x0000}, {0, 1, 0x0000}, {1, 0, 0x0000},
    {0, 0, 0x0000}, {1, 0,-0x20bf}, {1, 0,-0x2046}, {0, 1, 0x0040},
    {0, 1, 0x003f}, {0, 1, 0x003f}, {1, 0, 0x0008}, {1, 0, 0x0008},
    {1, 0, 0x0008}, {1, 0, 0x0008}, {0, 0, 0x0000}, {0, 0, 0x0000},
    {0, 1, 0x001c}, {0, 0, 0x0000}, {0, 1, 0x0000}, {0, 1,-0x8a04},
    {0, 1, 0x0000}, {0, 1, 0x0000}, {1, 0,-0x1dbf}, {0, 1, 0x0000},
    {0, 1,-0x0bc0}, {0, 1,-0x0bc0}, {0, 1,-0x0bc0}, {0, 1,-0x0bc0},
    {0, 0, 0x0000}, {0, 1, 0x0000}, {0, 1,-0x0ee6}, {0, 1, 0x0000},
    {0, 1, 0x0000}, {1, 0, 0x0001}, {0, 1, 0x0001}, {1, 0,-0xa544},
    {1, 0,-0xa54f}, {0, 1,-0x0008}, {0, 1,-0x0008}, {0, 1,-0x0008},
    {0, 1,-0x0008}, {0, 0, 0x0000}, {0, 0, 0x0000}, {1, 0,-0x0008},
    {1, 0,-0x0008}, {1, 0,-0x0008}, {1, 0,-0x0008}, {0, 0, 0x0000},
    {0, 0, 0x0000}, {0, 1,-0x004a}, {0, 1,-0x004a}, {0, 1,-0x0056},
    {0, 1,-0x0056}, {0, 1,-0x0064}, {0, 1,-0x0064}, {0, 1,-0x0008},
    {0, 1,-0x0008}, {0, 1, 0x0000}, {0, 1, 0x0000}, {1, 0, 0x0000},
    {0, 1, 0x0000}, {0, 1,-0x29e7}, {0, 1, 0x0000}, {0, 1, 0x0000},
    {0, 0, 0x0000}, {0, 1, 0x0000}, {0, 1, 0x0000}, {1, 0, 0x2a2b},
    {1, 0, 0x0001}, {1, 0, 0x0000}, {0, 0, 0x0000}, {1, 0, 0x0000},
    {0, 0, 0x0000}, {1, 0,-0x1d5d}, {0, 0, 0x0000}, {0, 1, 0x001a},
    {0, 1, 0x001a}, {0, 1, 0x001a}, {0, 1, 0x001a}, {0, 0, 0x0000},
    {0, 0, 0x0000}, {0, 1, 0x0027}, {0, 1, 0x0027}, {0, 1, 0x0027},
    {0, 1, 0x0027}, {0, 0, 0x0000}, {0, 1, 0x0027}, {1, 0, 0x0022},
    {1, 0, 0x0022}, {1, 0, 0x0022}, {1, 0, 0x0022}, {0, 1, 0x0022},
    {0, 1, 0x0022}, {0, 1, 0x0022}, {0, 1, 0x0022}, {0, 1, 0x0001},
    {1, 0,-0x00a3}, {1, 0, 0x2a28}, {0, 1,-0x2a3f}, {1, 0, 0x0001},
    {0, 1, 0x0001}, {1, 0,-0x00c3}, {0, 1, 0x00ce}, {0, 1, 0x0000},
    {0, 1, 0x00cd}, {0, 1, 0x00cd}, {0, 1,-0xa54b}, {0, 1, 0x0000},
    {0, 1, 0x00cf}, {0, 1, 0x00da}, {0, 1, 0x0000}, {0, 1,-0xa543},
    {0, 1, 0x00da}, {0, 1, 0x0045}, {0, 1, 0x00d9}, {0, 1, 0x00d9},
    {0, 1, 0x186e}, {0, 1, 0x186d}, {0, 1, 0x1864}, {0, 1, 0x1862},
    {0, 1, 0x1863}, {0, 1, 0x185c}, {0, 1, 0x1825}, {1, 0,-0xa512},
    {1, 0,-0xa52a}, {1, 0,-0xa515}, {1, 0, 0x03a0}, {1, 0,-0x29e7},
    {0, 1, 0x2a2b}, {0, 1, 0x2a28}, {1, 0, 0x0001}, {1, 0,-0x0080},
    {1, 0,-0x0080}, {1, 0,-0x007e}, {1, 0,-0x007e}, {1, 0,-0x0056},
    {1, 0,-0x0056}, {1, 0,-0x0056}, {1, 0,-0x0056}, {1, 0,-0x003c},
    {0, 1, 0x0060}, {0, 0, 0x0000}, {1, 0, 0x0001}, {1, 0,-0x0030},
    {1, 0,-0xa543}, {1, 0,-0x8a38}, {1, 0, 0x0001}, {1, 0,-0x0009},
    {0, 0, 0x0000}, {0, 0, 0x0000}, {0, 0, 0x0000}, {1, 0,-0x0008},
    {1, 0,-0x0008}, {1, 0,-0x0070}, {1, 0,-0x0070}, {1, 0,-0x0008},
    {1, 0,-0x0008}, {1, 0,-0x0064}, {1, 0,-0x0064}, {0, 1,-0xa541},
    {0, 1, 0x0000}, {0, 1, 0x0000}, {0, 1, 0x00d3}, {0, 1,-0x2a1f},
    {0, 1,-0x2a1c}, {0, 1,-0x2a1e}, {0, 1, 0x00d2}, {0, 1,-0x0080},
    {0, 1,-0x0080}, {0, 1,-0x0070}, {0, 1,-0x0070}, {0, 1, 0x0001},
    {1, 0,-0x2a1c}, {1, 0,-0x29fd}, {1, 0,-0x2a1f}, {0, 1, 0x0001},
    {0, 1, 0x0000}, {1, 0, 0x004f}, {1, 0, 0x00ca}, {0, 1, 0x0001},
    {1, 0, 0x00d9}, {1, 0, 0x00d9}, {1, 0, 0x0001}, {0, 1, 0x0010},
    {0, 1, 0x0010}, {0, 1, 0x0010}, {0, 1, 0x0010}, {0, 1, 0x0020},
    {0, 1, 0x0020}, {0, 1, 0x001f}, {0, 1, 0x0020}, {0, 1, 0x0026},
    {0, 1, 0x0025}, {0, 1, 0x0025}, {0, 1, 0x0025}, {0, 1, 0x0028},
    {0, 1, 0x0028}, {0, 1, 0x0028}, {0, 1, 0x0028}, {0, 1, 0x0050},
    {0, 1, 0x0050}, {0, 1, 0x0050}, {0, 1, 0x0050}, {0, 1, 0x0056},
    {0, 1, 0x0050}, {0, 1,-0x0007}, {0, 1, 0x0074}, {0, 1, 0x00d1},
    {0, 1, 0x00d3}, {0, 1,-0xa544}, {0, 1,-0x29f7}, {0, 1, 0x97d0},
    {0, 1, 0x97d0}, {0, 1, 0x97d0}, {0, 1, 0x97d0}, {1, 0, 0x0010},
    {1, 0, 0x0010}, {1, 0, 0x0010}, {1, 0, 0x0010}, {1, 0, 0x0028},
    {1, 0, 0x0028}, {1, 0, 0x0028}, {1, 0, 0x0028}, {1, 0, 0x0050},
    {1, 0, 0x0050}, {1, 0, 0x0050}, {1, 0, 0x0050}, {1, 0, 0x00cf},
    {0, 1,-0x0061}, {1, 0, 0x00d3}, {1, 0, 0x00d1}, {1, 0, 0x00d3},
    {1, 0, 0x00d5}, {0, 1,-0x0082}, {1, 0, 0x00d6}, {1, 0, 0x97d0},
    {1, 0, 0x97d0}, {1, 0, 0x97d0}, {1, 0, 0x97d0}
};

static const uint16_t unicode_offsets1[1752] = {
    0x007a, 0x007a, 0x007a, 0x007a, 0x007a, 0x007a, 0x007a, 0x007a, 0x007a, 0x007c,
    0x0004, 0x007e, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0136, 0x0136, 0x0136, 0x0136, 0x0136, 0x0136,
    0x0136, 0x0136, 0x0136, 0x0138, 0x0004, 0x013a, 0x0154, 0x0154, 0x0154, 0x0154,
    0x0154, 0x0154, 0x0154, 0x0154, 0x0154, 0x0154, 0x0155, 0x0153, 0x008b, 0x008b,
    0x008b, 0x008b, 0x008b, 0x008b, 0x0009, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063,
    0x0063, 0x008b, 0x008b, 0x008b, 0x008b, 0x008b, 0x008b, 0x0009, 0x0063, 0x017b,
    0x0063, 0x0063, 0x0063, 0x0063, 0x008b, 0x008b, 0x008b, 0x008b, 0x008b, 0x008b,
    0x0009, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x008e, 0x0080, 0x008f,
    0x0007, 0x008e, 0x008b, 0x0009, 0x017a, 0x00b3, 0x0063, 0x00b3, 0x0063, 0x0063,
    0x008b, 0x008b, 0x008b, 0x008b, 0x008b, 0x008b, 0x0009, 0x0063, 0x0063, 0x0063,
    0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063,
    0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063,
    0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x014e, 0x0159, 0x0063,
    0x0063, 0x0063, 0x011b, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063,
    0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0029, 0x002a, 0x002a, 0x002a, 0x002a, 0x002a, 0x0026, 0x0004, 0x0038,
    0x0039, 0x0039, 0x0039, 0x0039, 0x0039, 0x0048, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0227, 0x0227, 0x0227,
    0x0227, 0x0227, 0x0227, 0x0227, 0x0227, 0x0227, 0x0227, 0x0227, 0x0227, 0x0227,
    0x0227, 0x0227, 0x0227, 0x0227, 0x0227, 0x0227, 0x0227, 0x0146, 0x0148, 0x0013,
    0x0015, 0x0063, 0x0063, 0x017a, 0x0063, 0x0063, 0x0063, 0x0063, 0x0001, 0x0004,
    0x00b3, 0x0001, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x002a, 0x002a, 0x002a, 0x002a, 0x002a,
    0x002a, 0x002a, 0x002a, 0x0039, 0x0039, 0x0039, 0x0039, 0x0039, 0x0039, 0x0039,
    0x0039, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x00b8, 0x00b8, 0x00b8, 0x00b8, 0x00b8, 0x00b8, 0x00b8,
    0x00b8, 0x00b8, 0x00b8, 0x00b8, 0x00b8, 0x00b9, 0x0004, 0x0004, 0x0004, 0x00bf,
    0x00bf, 0x00bf, 0x00bf, 0x00bf, 0x00bf, 0x00bf, 0x00bf, 0x00bf, 0x00bf, 0x00bf,
    0x00bf, 0x00c0, 0x0004, 0x0004, 0x0004, 0x0063, 0x008d, 0x008c, 0x0007, 0x008b,
    0x008e, 0x008b, 0x0097, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x008d,
    0x008c, 0x008b, 0x0181, 0x0006, 0x008b, 0x0097, 0x0063, 0x0063, 0x0063, 0x0063,
    0x0063, 0x0063, 0x008b, 0x008b, 0x008b, 0x008b, 0x008b, 0x008b, 0x0009, 0x0063,
    0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x008b, 0x008b, 0x008b, 0x008b, 0x008b,
    0x008b, 0x0009, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x008b, 0x008b,
    0x008b, 0x008b, 0x008b, 0x008b, 0x0009, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063,
    0x0063, 0x0002, 0x008b, 0x008b, 0x008b, 0x008b, 0x008b, 0x008b, 0x0097, 0x0063,
    0x0063, 0x0063, 0x0063, 0x0063, 0x0001, 0x0063, 0x000b, 0x008b, 0x008b, 0x008b,
    0x008b, 0x008b, 0x008c, 0x0063, 0x0001, 0x0004, 0x0004, 0x00ae, 0x0063, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0083, 0x0085, 0x0085, 0x0085, 0x0085, 0x0085, 0x0085,
    0x0187, 0x0187, 0x0187, 0x0187, 0x0187, 0x0187, 0x0189, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x017b, 0x0063, 0x008b,
    0x008b, 0x008b, 0x008b, 0x008b, 0x008b, 0x0097, 0x0063, 0x0063, 0x0063, 0x0063,
    0x0063, 0x0001, 0x0063, 0x000b, 0x008b, 0x008b, 0x008b, 0x008b, 0x008b, 0x008c,
    0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x017b, 0x0063, 0x008b, 0x008b,
    0x008b, 0x008b, 0x008b, 0x008b, 0x0097, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063,
    0x0001, 0x0063, 0x0175, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0063, 0x0063, 0x0063, 0x0063,
    0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063,
    0x0063, 0x0002, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x01b0, 0x01b3,
    0x0071, 0x0004, 0x0075, 0x0075, 0x0075, 0x0075, 0x0075, 0x0075, 0x0075, 0x0075,
    0x0075, 0x0075, 0x0076, 0x0074, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0029, 0x002a, 0x002a, 0x002a, 0x002a, 0x002a, 0x0026, 0x0004, 0x0038, 0x0039,
    0x0039, 0x0039, 0x0039, 0x0039, 0x0048, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x00af, 0x0004, 0x0004, 0x00c7,
    0x00af, 0x0004, 0x002a, 0x002a, 0x002a, 0x002a, 0x002a, 0x0026, 0x002a, 0x002b,
    0x0039, 0x0039, 0x0039, 0x0039, 0x0039, 0x0048, 0x0039, 0x003a, 0x0193, 0x0193,
    0x0193, 0x0193, 0x0193, 0x0193, 0x0193, 0x0193, 0x0195, 0x0197, 0x0197, 0x0197,
    0x0197, 0x0197, 0x0197, 0x0197, 0x0197, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x00b1, 0x017a, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063,
    0x0063, 0x0063, 0x0063, 0x0063, 0x017b, 0x0063, 0x0001, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x012a, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0057, 0x0113, 0x00c9, 0x00cc, 0x0004,
    0x012c, 0x0035, 0x00bb, 0x0025, 0x002a, 0x002a, 0x002a, 0x0027, 0x002a, 0x002a,
    0x01fb, 0x0047, 0x0039, 0x0039, 0x0039, 0x01f7, 0x0039, 0x0039, 0x0143, 0x0089,
    0x0010, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0207, 0x01c7, 0x0130,
    0x010b, 0x021b, 0x021b, 0x021b, 0x021b, 0x002a, 0x002a, 0x002a, 0x002a, 0x002a,
    0x002a, 0x002a, 0x002a, 0x0039, 0x0039, 0x0039, 0x0039, 0x0039, 0x0039, 0x0039,
    0x0039, 0x0203, 0x0203, 0x0203, 0x0203, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057,
    0x0057, 0x0057, 0x0057, 0x0110, 0x0004, 0x0113, 0x0057, 0x0057, 0x0057, 0x0057,
    0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x009d,
    0x00dd, 0x00dd, 0x00fa, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057,
    0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x006b, 0x006c, 0x006c, 0x006c, 0x006c,
    0x006c, 0x006c, 0x006c, 0x006c, 0x006d, 0x0004, 0x0004, 0x011e, 0x011f, 0x011f,
    0x011f, 0x011f, 0x011f, 0x011f, 0x011f, 0x011f, 0x0120, 0x0003, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x00b0, 0x0004, 0x0004,
    0x00ae, 0x0004, 0x0004, 0x0004, 0x0004, 0x0063, 0x0063, 0x0063, 0x0003, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057,
    0x0057, 0x0057, 0x0057, 0x0057, 0x0110, 0x0004, 0x0004, 0x0004, 0x0004, 0x0057,
    0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0002, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x008b, 0x008b, 0x008b, 0x008b, 0x008b, 0x008b, 0x0090, 0x0004, 0x008b,
    0x008b, 0x008b, 0x008b, 0x008b, 0x008b, 0x0090, 0x0004, 0x008b, 0x008b, 0x008b,
    0x008b, 0x008b, 0x008b, 0x0008, 0x0080, 0x0005, 0x013c, 0x0009, 0x0008, 0x0081,
    0x0007, 0x0090, 0x0004, 0x0183, 0x013f, 0x0096, 0x000d, 0x0003, 0x00b0, 0x000b,
    0x0004, 0x001c, 0x0002, 0x014a, 0x0004, 0x0004, 0x0004, 0x0004, 0x0213, 0x0213,
    0x0213, 0x0213, 0x01f3, 0x01f3, 0x01f3, 0x01f3, 0x0112, 0x0111, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x00a8, 0x00a8,
    0x00a9, 0x00a8, 0x00a8, 0x00a8, 0x00a9, 0x00a8, 0x00a9, 0x00aa, 0x018d, 0x018d,
    0x018f, 0x018d, 0x018d, 0x018d, 0x018f, 0x018d, 0x018f, 0x00ad, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063, 0x0063,
    0x0063, 0x0063, 0x0064, 0x0063, 0x0001, 0x0063, 0x0063, 0x0063, 0x0002, 0x0004,
    0x020f, 0x020f, 0x020f, 0x020f, 0x020f, 0x020f, 0x020f, 0x020f, 0x020f, 0x020f,
    0x020f, 0x020f, 0x020f, 0x020f, 0x020f, 0x020f, 0x020f, 0x020f, 0x020f, 0x020f,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0113, 0x0057, 0x0057, 0x0057,
    0x015b, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057,
    0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0063, 0x0063, 0x0056, 0x00ef,
    0x0057, 0x0057, 0x0112, 0x0127, 0x0057, 0x0052, 0x0057, 0x0057, 0x0057, 0x0057,
    0x015d, 0x003e, 0x01b7, 0x0057, 0x0057, 0x0057, 0x0057, 0x01cb, 0x009f, 0x0004,
    0x00a0, 0x00a2, 0x0110, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x00b2, 0x010f,
    0x0001, 0x0004, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057,
    0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057,
    0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057,
    0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0106,
    0x00b4, 0x0150, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057,
    0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057,
    0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x00d0, 0x0057, 0x0056, 0x00dd,
    0x00dd, 0x00dd, 0x0055, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057,
    0x0057, 0x0057, 0x0057, 0x0057, 0x00db, 0x0058, 0x00e3, 0x0115, 0x00eb, 0x01eb,
    0x00e9, 0x021f, 0x00d2, 0x0223, 0x0057, 0x00e5, 0x00f2, 0x00e5, 0x01ef, 0x00df,
    0x005e, 0x00a4, 0x0004, 0x00d6, 0x00d7, 0x00f8, 0x00dd, 0x00dd, 0x00dd, 0x00fe,
    0x0057, 0x0057, 0x0057, 0x0057, 0x00d5, 0x0100, 0x0057, 0x0057, 0x0057, 0x0057,
    0x0057, 0x0057, 0x0057, 0x0057, 0x010e, 0x0057, 0x0057, 0x0057, 0x0057, 0x0063,
    0x017d, 0x019b, 0x019e, 0x0104, 0x0057, 0x0057, 0x01df, 0x01a2, 0x0123, 0x0062,
    0x01a5, 0x001f, 0x020b, 0x01db, 0x0044, 0x0119, 0x0063, 0x0178, 0x01a9, 0x00f4,
    0x01ac, 0x0000, 0x0108, 0x00b3, 0x0063, 0x0022, 0x0063, 0x0063, 0x0063, 0x0063,
    0x0063, 0x0063, 0x0003, 0x0004, 0x0002, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0063, 0x0003, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x006c, 0x006c, 0x006c, 0x006c, 0x006c, 0x006c, 0x006c, 0x006c, 0x006c, 0x006c,
    0x006c, 0x006c, 0x011f, 0x011f, 0x011f, 0x011f, 0x011f, 0x011f, 0x011f, 0x011f,
    0x011f, 0x011f, 0x011f, 0x011f, 0x0132, 0x01bb, 0x00dd, 0x01e7, 0x005c, 0x005d,
    0x0063, 0x0099, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057,
    0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057,
    0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0057, 0x0003, 0x0112, 0x009f,
    0x0113, 0x0004, 0x0004, 0x0004, 0x0161, 0x0161, 0x0167, 0x0167, 0x0161, 0x0163,
    0x0167, 0x0169, 0x0161, 0x0161, 0x0167, 0x0167, 0x0161, 0x0161, 0x0167, 0x0167,
    0x0161, 0x0163, 0x0167, 0x0169, 0x002e, 0x002e, 0x004b, 0x004b, 0x0161, 0x0161,
    0x0167, 0x0167, 0x016d, 0x016f, 0x01e3, 0x00c4, 0x0161, 0x0161, 0x0167, 0x0167,
    0x0161, 0x0161, 0x0167, 0x0167, 0x0161, 0x0161, 0x0167, 0x0167, 0x0031, 0x017b,
    0x004e, 0x0019, 0x0092, 0x017b, 0x01c3, 0x01cf, 0x0173, 0x00b2, 0x01d7, 0x0004,
    0x0173, 0x0041, 0x01d3, 0x0068, 0x0092, 0x017b, 0x01bf, 0x01cf, 0x0217, 0x0217,
    0x0217, 0x0217, 0x0217, 0x0217, 0x0217, 0x0217, 0x0217, 0x0217, 0x01ff, 0x01ff,
    0x01ff, 0x01ff, 0x01ff, 0x01ff, 0x01ff, 0x01ff, 0x01ff, 0x01ff, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004, 0x0004,
    0x0004, 0x0004, 0x0217, 0x0217, 0x0217, 0x0217, 0x0217, 0x0217, 0x0217, 0x0217,
    0x0217, 0x0004, 0x01ff, 0x01ff, 0x01ff, 0x01ff, 0x01ff, 0x01ff, 0x01ff, 0x01ff,
    0x01ff, 0x0004
};

static const uint16_t unicode_offsets2[498] = {
    0x02e8, 0x059a, 0x05d8, 0x0377, 0x03b7, 0x03eb, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0018, 0x0211, 0x0211, 0x00e3,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x02b8, 0x0093,
    0x0566, 0x0658, 0x040f, 0x0496, 0x0211, 0x0211, 0x0224, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0618, 0x0000, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x043f, 0x0526, 0x0211, 0x0211,
    0x0211, 0x04ee, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x020b, 0x0211, 0x0211, 0x0211, 0x00cb, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0698, 0x04ba, 0x0211, 0x0348, 0x0211, 0x0211, 0x0211, 0x0211, 0x0173, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x013b, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0153, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0058, 0x01b3,
    0x01cc, 0x0264, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0123,
    0x0298, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0328,
    0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0211, 0x0473
};

static inline const struct CaseMappings *
get_unicode_entry(xkb_keysym_t ks)
{
    return &unicode_data[unicode_offsets1[unicode_offsets2[ks >> 8] + ((ks >> 2) & 0x3f)] + (ks & 0x03)];
}

XKB_EXPORT xkb_keysym_t
xkb_keysym_to_lower(xkb_keysym_t ks)
{
    if (ks <= 0x13be) {
        const struct CaseMappings *m = get_legacy_keysym_entry(ks);
        return (m->lower) ? ks + m->offset : ks;
    } else if (XKB_KEYSYM_UNICODE_MIN <= ks && ks <= 0x0101f189) {
        const struct CaseMappings *m = get_unicode_entry(ks - XKB_KEYSYM_UNICODE_OFFSET);
        if (m->lower) {
            ks = ks + m->offset;
            return (ks < XKB_KEYSYM_UNICODE_MIN) ? ks - XKB_KEYSYM_UNICODE_OFFSET : ks;
        } else {
            return ks;
        }
    } else {
        return ks;
    }
}

XKB_EXPORT xkb_keysym_t
xkb_keysym_to_upper(xkb_keysym_t ks)
{
    if (ks <= 0x13be) {
        const struct CaseMappings *m = get_legacy_keysym_entry(ks);
        return (m->upper) ? ks - m->offset : ks;
    } else if (XKB_KEYSYM_UNICODE_MIN <= ks && ks <= 0x0101f189) {
        const struct CaseMappings *m = get_unicode_entry(ks - XKB_KEYSYM_UNICODE_OFFSET);
        if (m->upper) {
            ks = ks - m->offset;
            return (ks < XKB_KEYSYM_UNICODE_MIN) ? ks - XKB_KEYSYM_UNICODE_OFFSET : ks;
        } else {
            return ks;
        }
    } else {
        return ks;
    }
}

bool
xkb_keysym_is_lower(xkb_keysym_t ks)
{
    /* This predicate matches keysyms with their corresponding Unicode code point
     * having the Unicode property “Lowercase”.
     *
     * Here: a keysym is lower case if it has an upper case and no lower case.
     * Note: title case letters may have both. Example for U+01F2:
     * • U+01F1 Ǳ: upper case
     * • U+01F2 ǲ: title case
     * • U+01F3 ǳ: lower case
     */
    if (ks <= 0x13be) {
        const struct CaseMappings *m = get_legacy_keysym_entry(ks);
        return m->upper && !m->lower;
    } else if (XKB_KEYSYM_UNICODE_MIN <= ks && ks <= 0x0101f189) {
        const struct CaseMappings *m = get_unicode_entry(ks - XKB_KEYSYM_UNICODE_OFFSET);
        return m->upper && !m->lower;
    } else {
        return false;
    }
}

bool
xkb_keysym_is_upper_or_title(xkb_keysym_t ks)
{
    /* This predicate matches keysyms with their corresponding Unicode code point
     * having the Unicode properties “Uppercase” or General Category “Lt”.
     *
     * Here: a keysym is upper case or title case if it has a lower case. */
    if (ks <= 0x13be) {
        return get_legacy_keysym_entry(ks)->lower;
    } else if (XKB_KEYSYM_UNICODE_MIN <= ks && ks <= 0x0101f189) {
        return get_unicode_entry(ks - XKB_KEYSYM_UNICODE_OFFSET)->lower;
    } else {
        return false;
    }
}
